---
title: "å›³å½¢ã‚’çµ„ã¿åˆã‚ã›ãŸé ˜åŸŸã®é¢ç©ã‚’ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³•ã§æ±‚ã‚ã‚‹"
emoji: "ğŸ˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["JavaScript", "Vuejs", "ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³•"]
published: true
---

# èƒŒæ™¯

ä»•äº‹ã§å††ã¨é•·æ–¹å½¢ã‚’çµ„ã¿åˆã‚ã›ã¦ã§ãã‚‹å›³å½¢ã®é¢ç©ã‚’æ±‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ã¦ã€ã—ã‹ã‚‚çµ„ã¿åˆã‚ã›ã‹ãŸï¼ˆå„ã€…ã®å›³å½¢ã®ä½ç½®ãƒ»ã‚µã‚¤ã‚ºãƒ»æ•°ï¼‰ã‚’è‡ªç”±ã«å¤‰ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ã¨ã„ã†æ¡ä»¶ãŒä»˜ã„ã¦ã„ã¾ã—ãŸã€‚æ•°å¼ã‚’ç«‹ã¦ã¦ä¸€èˆ¬åŒ–ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ãƒ ãƒªãã†ã ã£ãŸã®ã§ã€ã‚ã‚‹ç¨‹åº¦ã®ç²¾åº¦ã‚’çŠ ç‰²ã«ã—ã¦åŠ›æ¥­ã§æ±‚ã‚ã¾ã—ãŸã€‚

å…·ä½“çš„ã«è¨€ã†ã¨ã“ã†ã„ã†å›³ã®èµ¤éƒ¨åˆ†ã®é¢ç©ãŒæ±‚ã‚ãŸã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚

![æ±‚ã‚ãŸã„é¢ç©ã®å›³](https://storage.googleapis.com/zenn-user-upload/cdnarjhwo1oyi1fp7ulufrt5qkgd)

# å®Ÿè£…

## ãƒ‡ãƒ¢

å‹•ãã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã€‚è¨ˆç®—ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨è¨ˆç®—ã‚’å§‹ã‚ã¾ã™ã€‚çµæœãŒå‡ºã‚‹ã¾ã§6ï½7ç§’ã‹ã‹ã‚Šã¾ã™ã€‚

@[jsfiddle](https://jsfiddle.net/b19fxwud/1/)

## æ–¹é‡ 

ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³•ã‚’ä½¿ã†æ–¹é‡ã¨ã—ã¾ã™ã€‚ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³•ã‚’ã”å­˜ã˜ã§ã™ã‹ã€‚

> ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„æ•°å€¤è¨ˆç®—ã‚’ä¹±æ•°ã‚’ç”¨ã„ã¦è¡Œã†æ‰‹æ³•ã®ç·ç§°ã€‚ï¼ˆ[Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%B3%E3%83%86%E3%82%AB%E3%83%AB%E3%83%AD%E6%B3%95])ï¼‰

ã ãã†ã§ã™ã€‚ç§ã¯å††å‘¨ç‡ã‚’æ±‚ã‚ã‚‹è©±ã§ãŸã¾ã«å‡ºã¦ãã‚‹ã®ã§çŸ¥ã£ã¦ã„ã¾ã—ãŸã€‚

å¹³é¢é ˜åŸŸï¼ˆä»®ã«Aã¨ã—ã¾ã—ã‚‡ã†ï¼‰ã«å‡ä¸€ã«åˆ†å¸ƒã™ã‚‹ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã‚’ãŸãã•ã‚“ç”Ÿæˆã—ã€å…¨ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã®ã†ã¡é¢ç©ã‚’æ±‚ã‚ãŸã„é ˜åŸŸï¼ˆBã¨ã—ã¾ã—ã‚‡ã†ï¼‰ã®ä¸­ã«å…¥ã£ãŸç‚¹ã®æ•°ã‚’æ•°ãˆã¾ã™ã€‚ã™ã‚‹ã¨ã€
$$\text{Bã®é¢ç©} = \frac{\text{Bã®ä¸­ã«å…¥ã£ãŸç‚¹ã®æ•°}}{\text{ã™ã¹ã¦ã®ç‚¹ã®æ•°}} \times \text{Aã®é¢ç©}$$
ã¨ãªã‚Šã¾ã™ã€‚

æ±‚ã‚ã‚‹é ˜åŸŸã¯å††ã¨é•·æ–¹å½¢ã®çµ„ã¿åˆã‚ã›ãªã®ã§ã€ãã‚Œãã‚Œã®å½¢ã«ã¤ã„ã¦ãƒ©ãƒ³ãƒ€ãƒ ã«ç”Ÿæˆã—ãŸåº§æ¨™ã®å†…å¤–åˆ¤å®šã‚’è¡Œã„ã€Andã‚„Orã§çµ„ã¿åˆã‚ã›ã¦æœ€çµ‚çš„ãªå†…å¤–åˆ¤å®šã‚’ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã€‚

## å…¥åŠ›ãƒ‡ãƒ¼ã‚¿

çµ„ã¿åˆã‚ã›ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«Så¼é¢¨ã®é…åˆ—ã§è¡¨ç¾ã™ã‚‹ã“ã¨ã«ã—ã¦ã€ã“ã®Så¼ã¨ç‚¹ã®åº§æ¨™ã‚’ä¸ãˆã‚‹ã¨å†å¸°çš„ã«å†…å¤–åˆ¤å®šã‚’ã™ã‚‹é–¢æ•°ã‚’è€ƒãˆã¾ã™ã€‚ä¸Šè¨˜ã®ãƒ‡ãƒ¢ã§ã¯Vueã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä¸­ã«ç›´æ¥æ›¸ãè¾¼ã‚“ã§ã„ã¾ã™ã€‚

```js
// inputï¼ˆä¸Šã®ãƒ‡ãƒ¢ã§ã¯Vueã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä¸­ï¼‰
shape: [
  "and",
  [
    "or",
    ["rectangle", -500, -500, 500, 250]
  ],
  [
    "or",
    ["circle", 100, 100, 300],
    ["circle", -100, 100, 300]
  ]
]
```

## ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹

ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã®å¯†åº¦ãŒé«˜ã„æ–¹ãŒç²¾åº¦ãŒã„ã„ã¯ãšãªã®ã§ã€ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã‚’ç”Ÿæˆã™ã‚‹ç¯„å›²ã‚’é™å®šã—ã¾ã™ã€‚ã“ã‚Œã‚‚å…¥åŠ›ã®ç–‘ä¼¼Så¼ã‚’å†å¸°çš„ã«è©•ä¾¡ã—ã¦xminï½xmaxã€yminï½ymaxã‚’æ±ºã‚ã¾ã™ã€‚

```js
// é¢ç©ã‚’æ±‚ã‚ã‚‹é ˜åŸŸã‚’å›²ã‚€é•·æ–¹å½¢ã‚’æ±‚ã‚ã‚‹
boundingBox (shape) {
  if (shape[0] === "and") {
    return shape.slice(1).map(this.boundingBox.bind(this))
      .reduce((p, c) => [
        Math.max(p[0], c[0]),
        Math.max(p[1], c[1]),
        Math.min(p[2], c[2]),
        Math.min(p[3], c[3])
      ])

  } else if (shape[0] === "or") {
    return shape.slice(1).map(this.boundingBox.bind(this))
      .reduce((p, c) => [
        Math.min(p[0], c[0]),
        Math.min(p[1], c[1]),
        Math.max(p[2], c[2]),
        Math.max(p[3], c[3])
      ])
  
  } else if (shape[0] === "rectangle") {
    return shape.slice(1)
  
  } else if (shape[0] === "circle") {
    return [
      shape[1] - shape[3],
      shape[2] - shape[3],
      shape[1] + shape[3],
      shape[2] + shape[3]
    ]
  }
}
```

## ãƒ©ãƒ³ãƒ€ãƒ ç‚¹

[xmin, xmax), [ymin, ymax)ã®ç¯„å›²ã§ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```js
// minï½maxã®å®Ÿæ•°ä¹±æ•°ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
randBetween(min, max) {
  return Math.random() * (max - min) + min
}
```

## é ˜åŸŸã®å†…å¤–åˆ¤å®š

pointã§ä¸ãˆã‚‰ã‚ŒãŸç‚¹ãŒé ˜åŸŸã®å†…å´ã‹å¤–å´ã‹ã‚’åˆ¤å®šã™ã‚‹å‡¦ç†ã§ã™ã€‚ã“ã“ã‚‚ç–‘ä¼¼Så¼ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã€å†å¸°å‡¦ç†ã—ã¦ã„ã¾ã™ã€‚ã‚ã¨ã€andã®å‡¦ç†ã§ã¯`false`ãŒ1ã¤ã§ã‚‚ã‚ã‚Œã°ã€ã¾ãŸã€orã®å‡¦ç†ã§ã¯`true`ãŒ1ã¤ã§ã‚‚ã‚ã‚Œã°ãã®æ™‚ç‚¹ã§`return`ã—ã¦ã—ã¾ã„ã¾ã™ã€‚æ—©ã‚ã«`return`ã—ã¦ã‚ã’ã‚‹ã“ã¨ã§ç›®ã«è¦‹ãˆã¦ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒä¸ŠãŒã‚Šã¾ã™ã€‚

```js
// ç‚¹ãŒé¢ç©ã‚’æ±‚ã‚ãŸã„å›³å½¢ã®å†…å´ã ã£ãŸã‚‰trueã‚’è¿”ã™
// shapeãƒ‡ãƒ¼ã‚¿ãŒå›³å½¢ã®çµ„ã¿åˆã‚ã›ãªã®ã§ã€å†å¸°çš„ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹
isInner (shape, point) {
  if (shape[0] === "and") {
    for (let i = 1; i < shape.length; i++) {
      if (!this.isInner(shape[i], point)) return false
    }
    return true

  } else if (shape[0] === "or") {
    for (let i = 1; i < shape.length; i++) {
      if (this.isInner(shape[i], point)) return true
    }
    return false
  
  } else if (shape[0] === "rectangle") {
    return shape[1] <= point[0] && point[0] < shape[3]
      && shape[2] <= point[1] && point[1] < shape[4]
  
  } else if (shape[0] === "circle") {
    return (point[0] - shape[1]) ** 2 + (point[1] - shape[2]) ** 2
      <= shape[3] ** 2
  }
}
```

## é¢ç©ã®è¨ˆç®—

ã•ã‚ã€ã‚„ã£ã¨é¢ç©ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³•ã§é¢ç©ã‚’æ±‚ã‚ã‚‹å ´åˆã€æœ‰åŠ¹næ¡ã®ç²¾åº¦ãŒæ¬²ã—ã„ã¨ã—ãŸã‚‰$10^{2n}\,\text{å€‹}$ãã‚‰ã„ã®ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã‚’ç”Ÿæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‚ˆã†ã§ã™ã€‚ãŸã¶ã‚“é¢ç©ï¼ˆ$x \times y$ï¼‰ã ã‹ã‚‰$10^n \times 10^n$ãªã®ã§ã—ã‚‡ã†ã€‚å¿…è¦ãªç‚¹ã®æ•°ã‚’`imax`ã¨ã—ã¾ã™ã€‚

`imax`å›ã®ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§ãƒ©ãƒ³ãƒ€ãƒ ç‚¹ã®åº§æ¨™ã‚’ã²ã¨ã¤ã¥ã¤æ±‚ã‚ã€é¢ç©ã‚’æ±‚ã‚ã‚‹é ˜åŸŸã®å†…å´ã«å…¥ã£ã¦ã„ã‚‹å ´åˆã ã‘`count`ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¾ã™ã€‚æœ€çµ‚çš„ã«`count / imax`ãŒãƒ©ãƒ³ãƒ€ãƒ ç‚¹ãŒé ˜åŸŸã®å†…å´ã«å…¥ã‚‹ç¢ºç‡ã§ã™ã€‚

```js
// è¨ˆç®—èµ·ç‚¹
calc (digits, shape) {
  this.innerPoints = []
  this.outerPoints = []
  const imax = (10 ** digits) ** 2
  const [xmin, ymin, xmax, ymax] = this.boundingBox(shape)
  let count = 0
  
  for (let i = 0; i < imax; i++) {
    const point = [
      this.randBetween(xmin, xmax),
      this.randBetween(ymin, ymax)
    ]

    // è¨ˆç®—çµæœã‚’å›³ã§è¡¨ç¤ºã—ãŸã‹ã£ãŸã®ã§ã€ç”Ÿæˆã—ãŸç‚¹ã‚’å›³å½¢å†…å¤–ã§åˆ†ã‘ã¦ä¿æŒã—ã¦ã„ã‚‹
    // å›³ã«ã™ã‚‹å¿…è¦ãŒç„¡ã‘ã‚Œã°ã€æ¬¡ã®ã‚ˆã†ã«1è¡Œã§æ¸ˆã¾ã›ã¦ã„ã„
    // if (this.isInner(shape, point)) this.count++
    if (this.isInner(shape, point)) {
      count++
      this.innerPoints.push(point)
    } else {
      this.outerPoints.push(point)
    }
  }
  this.area = this.roundDigits(
    digits,
    (xmax - xmin) * (ymax - ymin) * count / imax
  )
}
```

ã‚„ã£ã¨é¢ç©ãŒæ±‚ã¾ã‚Šã¾ã—ãŸã€‚æ¬²ã—ã„åˆ¶åº¦ãŒå‡ºã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã«ã€æœ¬å½“ãªã‚‰æ¤œç®—ã‚’ã™ã‚‹ã®ã§ã™ãŒä»Šå›ã¯çœç•¥ã•ã›ã¦ãã ã•ã„ã€‚

# ãŠã‚ã‚Šã«

Excelã®ã‚·ãƒ¼ãƒˆä¸Šã®ä¸€æ©Ÿèƒ½ã¨ã—ã¦ä½¿ã„ãŸã‹ã£ãŸã®ã§ã€å®Ÿéš›ã¯VBAã§å®Ÿè£…ï¼ˆã¡ãªã¿ã«ã“ã¡ã‚‰ã¯æ¤œç®—ã—ã€æœŸå¾…é€šã‚Šã«è¨ˆç®—ã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã¾ã™ï¼‰ã—ã¾ã—ãŸã€å®Ÿã¯ã€‚ã—ã‹ã—è¨ˆç®—ã«10ï½20ç§’ã‹ã‹ã‚‹ã®ã§ä¸€åº¦ã«æ•°åãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—ã—ã‚ˆã†ã¨ã™ã‚‹ã¨10åˆ†ä»¥ä¸Šã‹ã‹ã‚‹ã“ã¨ã«ãªã‚Šã€å€‹äººçš„ã«ã¯ã¡ã‚‡ã£ã¨ä¸æº€ã§ã™ã€‚

ã‚‚ã£ã¨ã‚‚ã€å ´åˆã«ã‚ˆã£ã¦ã¯CADã§å›³ã‚’æã„ã¦é¢ç©ã‚’æ±‚ã‚ã¦ã„ãŸã®ã§ï¼ˆã•ã™ãŒã«ãã‚Œã¯1ç®‡æ‰€20ç§’ã§ã¯ã§ããªã„ï¼‰ã€æ™‚é–“ã‚‚æ‰‹é–“ã‚‚å¤§å¹…æ”¹å–„ã§ã¯ã‚ã‚Šã¾ã™ã€‚
